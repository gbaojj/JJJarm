local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local WebhookURL = "https://discord.com/api/webhooks/1335708371394887712/wALpD7OPn5iT1mk1_MQ659jd-V0mDSNZ48qf6ceWkiSjoa9YrlE2t0b9nUhEZd74rGok"

-- T√¨m GUI Inventory
local function GetKeyAmount(keyName)
    local inventory = Player:FindFirstChild("PlayerGui")
    if inventory then
        local gameUI = inventory:FindFirstChild("GameUI")
        if gameUI then
            local menus = gameUI:FindFirstChild("Menus")
            if menus then
                local inventoryMenu = menus:FindFirstChild("Inventory")
                if inventoryMenu then
                    local display = inventoryMenu:FindFirstChild("Display")
                    if display then
                        local items = display:FindFirstChild("Items")
                        if items then
                            -- L·∫∑p qua danh s√°ch v·∫≠t ph·∫©m ƒë·ªÉ t√¨m keyName
                            for _, item in pairs(items:GetChildren()) do
                                if item:IsA("TextLabel") and item.Name == keyName then
                                    return tonumber(item.Text) or 0
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return 0 -- Tr·∫£ v·ªÅ 0 n·∫øu kh√¥ng t√¨m th·∫•y
end

-- H√†m g·ª≠i d·ªØ li·ªáu l√™n Webhook Discord
local function SendWebhookMessage(playerName, dragonKeys, ninjaKeys)
    local data = {
        ["content"] = string.format(
            "**%s** hi·ªán c√≥:\nüî• **%d** Dragon Key\nü•∑ **%d** Ninja Tower Key\nüìÖ Th·ªùi gian: <t:%d:R>",
            playerName, dragonKeys, ninjaKeys, os.time()
        )
    }
    local jsonData = HttpService:JSONEncode(data)

    -- B·ªçc l·ªánh g·ª≠i request trong pcall ƒë·ªÉ ki·ªÉm tra l·ªói
    local success, response = pcall(function()
        return HttpService:PostAsync(WebhookURL, jsonData, Enum.HttpContentType.ApplicationJson)
    end)

    if success then
        print("‚úÖ Webhook g·ª≠i th√†nh c√¥ng!")
    else
        warn("‚ö†Ô∏è L·ªói g·ª≠i Webhook: " .. tostring(response))
    end
end

-- V√≤ng l·∫∑p ki·ªÉm tra s·ªë l∆∞·ª£ng Dragon Key & Ninja Tower Key
while true do
    task.wait(10) -- Ki·ªÉm tra m·ªói 10 gi√¢y

    local DragonKey = GetKeyAmount("Dragon Key")
    local NinjaKey = GetKeyAmount("Ninja Tower Key")

    SendWebhookMessage(Player.Name, DragonKey, NinjaKey)
end
